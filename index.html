<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Learn English">
    <title>Learn English - Bunny Adventure</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* FONT SIMPATICO */
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Fredoka', 'Comic Sans MS', sans-serif; 
            background-color: #e6f7ff; 
            -webkit-tap-highlight-color: transparent; 
        }
        .container { min-height: 100vh; padding: 1rem; max-width: 600px; margin: 0 auto; }
        
        /* BANNER FATTO CON CODICE (Niente immagini da caricare!) */
        .hero-banner {
            background: linear-gradient(180deg, #87CEEB 0%, #E0F7FA 100%);
            border-radius: 1.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
            box-shadow: 0 10px 20px -5px rgba(0,150,255,0.3);
            border: 4px solid #fff;
            position: relative;
            overflow: hidden;
        }
        
        /* Nuvole decorative */
        .cloud { position: absolute; font-size: 3rem; opacity: 0.8; animation: float 6s infinite ease-in-out; }
        .c1 { top: 10px; left: 10px; animation-delay: 0s; }
        .c2 { top: 30px; right: 10px; font-size: 2rem; animation-delay: 3s; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        .bunny-avatar { font-size: 5rem; display: block; margin-bottom: 0.5rem; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.1)); animation: bounce-soft 2s infinite; }
        @keyframes bounce-soft { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        .banner-title { font-size: 1.8rem; color: #0066cc; margin-bottom: 0.2rem; text-shadow: 2px 2px 0px #fff; }
        .banner-subtitle { font-size: 1.1rem; color: #555; background: rgba(255,255,255,0.7); padding: 5px 15px; border-radius: 20px; display: inline-block; }

        /* GRIGLIE */
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 1.5rem; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding-bottom: 1rem; }
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }

        /* BOTTONI CATEGORIE */
        .btn { border: none; cursor: pointer; transition: transform 0.1s; font-weight: bold; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .btn:active { transform: scale(0.95); }
        
        .btn-category { 
            color: white; 
            padding: 0.8rem 0.2rem; 
            border-radius: 1rem; 
            box-shadow: 0 5px 0 rgba(0,0,0,0.1); /* Effetto 3D leggero */
            height: 100px; 
            width: 100%;
            position: relative;
        }
        .btn-category .emoji-large { font-size: 2.2rem; margin-bottom: 5px; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2)); }
        .btn-category .category-name { font-size: 0.75rem; font-weight: 600; line-height: 1.1; }
        
        /* COLORI VIVACI */
        .bg-weather { background: #4FC3F7; }
        .bg-food { background: #81C784; }
        .bg-family { background: #FFD54F; color: #d35400; }
        .bg-animals { background: #F06292; }
        .bg-colors { background: #FF8A65; }
        .bg-numbers { background: #9575CD; }
        .bg-fruits { background: #FFB74D; }
        .bg-months { background: #4DB6AC; }
        .bg-gestures { background: #7986CB; }
        .bg-shapes { background: #BA68C8; }
        .bg-body { background: #90A4AE; }
        
        /* UI ELEMENTI */
        .btn-back { background: white; padding: 10px 20px; border-radius: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 20px; color: #333; font-weight: bold; font-size: 1rem; border: 2px solid #eee; }
        .stats-card { background: white; border-radius: 20px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-top: 20px; text-align: center; }
        
        /* MODALIT√Ä GIOCO */
        .mode-card { background: white; padding: 20px; border-radius: 20px; margin-top: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .btn-big { width: 100%; font-size: 1.5rem; padding: 20px; border-radius: 15px; margin-bottom: 15px; color: white; box-shadow: 0 6px 0 rgba(0,0,0,0.1); }
        .btn-learn { background: #4FC3F7; }
        .btn-quiz { background: #81C784; }

        .btn-item { background: white; padding: 10px; border-radius: 15px; box-shadow: 0 4px 0 #eee; border: 1px solid #f0f0f0; }
        .quiz-word { font-size: 3rem; color: #333; margin: 20px 0; }
        .celebration { position: fixed; top: 50%; left: 50%; transform: translate(-50%,-50%); font-size: 5rem; animation: pop 0.5s; z-index: 100; pointer-events: none; }
        @keyframes pop { 0% { transform: translate(-50%,-50%) scale(0); } 80% { transform: translate(-50%,-50%) scale(1.2); } 100% { transform: translate(-50%,-50%) scale(1); } }

    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [screen, setScreen] = useState('home');
            const [category, setCategory] = useState(null);
            const [stars, setStars] = useState(parseInt(localStorage.getItem('stars')) || 0);
            const [celebration, setCelebration] = useState(null);
            const [quiz, setQuiz] = useState(null);

            useEffect(() => { localStorage.setItem('stars', stars); }, [stars]);

            // DATI
            const data = {
                weather: { name: 'Weather', emoji: 'üå§Ô∏è', bg: 'bg-weather', items: [{name:'Sun',emoji:'‚òÄÔ∏è'},{name:'Rain',emoji:'üåßÔ∏è'},{name:'Cloud',emoji:'‚òÅÔ∏è'},{name:'Snow',emoji:'‚ùÑÔ∏è'}]},
                food: { name: 'Food', emoji: 'üçî', bg: 'bg-food', items: [{name:'Apple',emoji:'üçé'},{name:'Pizza',emoji:'üçï'},{name:'Burger',emoji:'üçî'},{name:'Ice Cream',emoji:'üç¶'}]},
                family: { name: 'Family', emoji: 'üë®‚Äçüë©‚Äçüëß', bg: 'bg-family', items: [{name:'Mom',emoji:'üë©'},{name:'Dad',emoji:'üë®'},{name:'Sister',emoji:'üëß'},{name:'Brother',emoji:'üë¶'}]},
                animals: { name: 'Animals', emoji: 'üê∂', bg: 'bg-animals', items: [{name:'Cat',emoji:'üê±'},{name:'Dog',emoji:'üê∂'},{name:'Lion',emoji:'ü¶Å'},{name:'Elephant',emoji:'üêò'}]},
                colors: { name: 'Colors', emoji: 'üé®', bg: 'bg-colors', items: [{name:'Red',emoji:'‚ù§Ô∏è'},{name:'Blue',emoji:'üíô'},{name:'Green',emoji:'üíö'},{name:'Yellow',emoji:'üíõ'}]},
                numbers: { name: 'Numbers', emoji: 'üî¢', bg: 'bg-numbers', items: [{name:'One',emoji:'1Ô∏è‚É£'},{name:'Two',emoji:'2Ô∏è‚É£'},{name:'Three',emoji:'3Ô∏è‚É£'},{name:'Four',emoji:'4Ô∏è‚É£'}]},
                fruits: { name: 'Fruits', emoji: 'üçé', bg: 'bg-fruits', items: [{name:'Banana',emoji:'üçå'},{name:'Grape',emoji:'üçá'},{name:'Orange',emoji:'üçä'},{name:'Cherry',emoji:'üçí'}]},
                months: { name: 'Months', emoji: 'üìÖ', bg: 'bg-months', items: [{name:'Jan',emoji:'‚ùÑÔ∏è'},{name:'Feb',emoji:'‚ù§Ô∏è'},{name:'Aug',emoji:'‚òÄÔ∏è'},{name:'Dec',emoji:'üéÑ'}]},
                gestures: { name: 'Gestures', emoji: 'ü§ù', bg: 'bg-gestures', items: [{name:'Hi',emoji:'üëã'},{name:'Yes',emoji:'üëç'},{name:'No',emoji:'üëé'},{name:'Clap',emoji:'üëè'}]},
                shapes: { name: 'Shapes', emoji: '‚≠ê', bg: 'bg-shapes', items: [{name:'Circle',emoji:'‚≠ï'},{name:'Square',emoji:'üü¶'},{name:'Star',emoji:'‚≠ê'},{name:'Heart',emoji:'‚ù§Ô∏è'}]},
                body: { name: 'Body', emoji: 'üëÄ', bg: 'bg-body', items: [{name:'Eye',emoji:'üëÄ'},{name:'Ear',emoji:'üëÇ'},{name:'Hand',emoji:'üëã'},{name:'Nose',emoji:'üëÉ'}]}
            };

            const speak = (text) => {
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(text);
                u.lang = 'en-US'; 
                u.rate = 0.9;
                window.speechSynthesis.speak(u);
            };

            const startQuiz = () => {
                const items = data[category].items;
                const correct = items[Math.floor(Math.random() * items.length)];
                const wrong = items.filter(i => i.name !== correct.name).sort(() => 0.5 - Math.random()).slice(0, 3);
                setQuiz({ correct, options: [correct, ...wrong].sort(() => 0.5 - Math.random()) });
                speak(`Find ${correct.name}`);
            };

            const checkAnswer = (item) => {
                if(item.name === quiz.correct.name) {
                    setStars(s => s + 2);
                    setCelebration('‚≠ê');
                    speak('Good job!');
                    setTimeout(() => { setCelebration(null); startQuiz(); }, 1200);
                } else {
                    speak('Try again');
                }
            };

            // HOME SCREEN
            if (screen === 'home') {
                return (
                    <div className="container">
                        {/* IL TUO NUOVO BANNER FATTO IN CODICE */}
                        <div className="hero-banner">
                            <div className="cloud c1">‚òÅÔ∏è</div>
                            <div className="cloud c2">‚òÅÔ∏è</div>
                            <div className="bunny-avatar">üê∞</div>
                            <h1 className="banner-title">Hi! I'm Bunny!</h1>
                            <div className="banner-subtitle">Let's learn English!</div>
                        </div>

                        <div className="grid-4">
                            {Object.keys(data).map(k => (
                                <button key={k} className={`btn btn-category ${data[k].bg}`} onClick={() => { setCategory(k); setScreen('mode'); }}>
                                    <div className="emoji-large">{data[k].emoji}</div>
                                    <div className="category-name">{data[k].name}</div>
                                </button>
                            ))}
                        </div>

                        <div className="stats-card">
                            <h3>My Stars: ‚≠ê {stars}</h3>
                        </div>
                    </div>
                );
            }

            // MODE SELECTION SCREEN
            if (screen === 'mode') {
                return (
                    <div className="container" style={{textAlign:'center'}}>
                        <button className="btn-back" onClick={() => setScreen('home')}>‚¨ÖÔ∏è Back</button>
                        <h1 style={{fontSize:'3rem', marginBottom:'10px'}}>{data[category].emoji}</h1>
                        <h2 style={{marginBottom:'20px', color:'#333'}}>{data[category].name}</h2>
                        
                        <div className="mode-card">
                            <button className="btn btn-big btn-learn" onClick={() => setScreen('learn')}>üìö Learn Words</button>
                            <button className="btn btn-big btn-quiz" onClick={() => { setScreen('quiz'); startQuiz(); }}>üéÆ Play Quiz</button>
                        </div>
                    </div>
                );
            }

            // LEARN SCREEN
            if (screen === 'learn') {
                return (
                    <div className="container">
                        <button className="btn-back" onClick={() => setScreen('mode')}>‚¨ÖÔ∏è Back</button>
                        <h2 style={{textAlign:'center', marginBottom:'15px'}}>{data[category].name}</h2>
                        <div className="grid-3">
                            {data[category].items.map((item, i) => (
                                <button key={i} className="btn btn-item" onClick={() => speak(item.name)}>
                                    <div style={{fontSize:'2.5rem'}}>{item.emoji}</div>
                                    <div style={{color:'#555', marginTop:'5px'}}>{item.name}</div>
                                </button>
                            ))}
                        </div>
                    </div>
                );
            }

            // QUIZ SCREEN
            if (screen === 'quiz' && quiz) {
                return (
                    <div className="container" style={{textAlign:'center'}}>
                        <button className="btn-back" onClick={() => setScreen('mode')}>‚¨ÖÔ∏è Quit</button>
                        <div style={{margin:'20px 0'}}>
                            <p style={{color:'#666', fontSize:'1.2rem'}}>Find the:</p>
                            <h1 className="quiz-word">{quiz.correct.name}</h1>
                            <button onClick={() => speak(quiz.correct.name)} style={{background:'none', border:'none', fontSize:'1.2rem', color:'#0066cc'}}>üîä Listen</button>
                        </div>

                        <div className="grid-2">
                            {quiz.options.map((item, i) => (
                                <button key={i} className="btn btn-item" style={{height:'120px'}} onClick={() => checkAnswer(item)}>
                                    <div style={{fontSize:'3.5rem'}}>{item.emoji}</div>
                                </button>
                            ))}
                        </div>
                        {celebration && <div className="celebration">{celebration}</div>}
                    </div>
                );
            }
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
